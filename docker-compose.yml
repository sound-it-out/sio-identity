version: '3.4'

services:
  sio.identity:
    image: ${DOCKER_REGISTRY-}sioidentity
    container_name: sio.identity
    build:
      context: .
      dockerfile: src/SIO.Identity/Dockerfile
    depends_on:
      - sio.identity.sql.identityserver
      - sio.identity.sql
  sio.identity.sql.identityserver:
    image: "mcr.microsoft.com/mssql/server:2019-latest"
    container_name: sio.identity.sql.identityserver
  sio.identity.sql:
    image: "mcr.microsoft.com/mssql/server:2019-latest"
    container_name: sio.identity.sql
networks:    
  default:
    external:
        name: sio.network